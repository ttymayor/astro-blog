---
import Layout from "@/layouts/Layout.astro";
import TechStacks from "@/components/react/TechStacks";
import { getCollection } from "astro:content";
import Slides from "@/components/react/Slides";
import { getLangFromUrl } from "@/i18n/utils";

const currentLang = getLangFromUrl(Astro.url);

const site = await getCollection("site");
const author = site[0]?.data.author;

const sortedSlides = author?.slides?.sort((a, b) => {
  return (
    new Date(b?.date ?? new Date()).getTime() -
    new Date(a?.date ?? new Date()).getTime()
  );
});
---

<Layout>
  <div class="flex flex-col items-center justify-center">
    <TechStacks
      techStacks={author.techStacks}
      client:only="react"
      lang={currentLang}
    />
    <Slides slides={sortedSlides} client:only="react" lang={currentLang} />
  </div>
</Layout>
